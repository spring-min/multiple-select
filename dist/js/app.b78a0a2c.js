(function(t){function e(e){for(var a,c,n=e[0],r=e[1],l=e[2],h=0,d=[];h<n.length;h++)c=n[h],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&d.push(i[c][0]),i[c]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);u&&u(e);while(d.length)d.shift()();return o.push.apply(o,l||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],a=!0,n=1;n<s.length;n++){var r=s[n];0!==i[r]&&(a=!1)}a&&(o.splice(e--,1),t=c(c.s=s[0]))}return t}var a={},i={app:0},o=[];function c(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,c),s.l=!0,s.exports}c.m=t,c.c=a,c.d=function(t,e,s){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(c.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(s,a,function(e){return t[e]}.bind(null,a));return s},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],r=n.push.bind(n);n.push=e,n=n.slice();for(var l=0;l<n.length;l++)e(n[l]);var u=r;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},1543:function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);var a=s("2b0e"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("meta-multiple-select",{attrs:{sourceList:t.sourceList,sourceSelectedList:t.sourceSelectedList},on:{returnData:t.changeData}})],1)},o=[],c={data(){return{sourceList:[{database:"数据库1"},{database:"数据库2"},{database:"数据库3"},{database:"数据库4"},{database:"数据库5"},{database:"数据库6"},{database:"数据库7"}],sourceSelectedList:[{database:"数据库1"},{database:"数据库4"}]}},methods:{changeData(t){console.log(t)}}},n=c,r=(s("7c55"),s("2877")),l=Object(r["a"])(n,i,o,!1,null,null,null),u=l.exports,h=s("f825"),d=s.n(h),p=(s("1543"),s("f6e1"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"meta-select-box",on:{click:function(e){return e.stopPropagation(),t.clickDropDown(e)}}},[s("div",{staticClass:"meta-select",class:{"meta-select-visible":t.showDropDownList}},[s("div",{staticClass:"meta-select-selection"},[t.selectedList.length>0?s("div",t._l(t.selectedList,(function(e,a){return s("Tag",{key:a,attrs:{closable:""},on:{"on-close":function(s){return t.deleteSelectItem(e,a)}}},[t._v(t._s(e.database))])})),1):t._e(),0==t.selectedList.length?s("div",{staticClass:"no-select-data"},[s("span",[t._v("请选择")])]):t._e()]),t.showDropDownList?t._e():s("i",{staticClass:"ivu-icon ivu-select-arrow ivu-icon-ios-arrow-down"}),t.showDropDownList?s("i",{staticClass:"ivu-icon ivu-select-arrow ivu-icon-ios-arrow-up"}):t._e()]),t.showDropDownList?s("div",{staticClass:"meta-select-dropdown-wrap"},[s("div",{staticClass:"meta-select-dropdown"},[s("div",{staticClass:"meta-select-search"},[s("div",{staticClass:"meta-select-search-input",on:{click:function(t){t.stopPropagation()}}},[s("Input",{attrs:{search:"",placeholder:"模糊匹配"},on:{"on-change":t.searchDatabase},model:{value:t.key,callback:function(e){t.key=e},expression:"key"}})],1),s("div",{staticClass:"meta-select-search-action"},[s("span",{on:{click:function(e){return e.stopPropagation(),t.selectMatch(e)}}},[t._v("选中匹配")])])]),0==t.searchMatchList.length?s("div",{staticClass:"no-data"},[s("span",[t._v("无数据～")])]):t._e(),t.searchMatchList.length>0?s("ul",{staticClass:"meta-select-dropdown-list"},t._l(t.searchMatchList,(function(e,a){return s("li",{key:a,staticClass:"meta-select-dropdown-item",class:{selected:e.selected},on:{click:function(s){return s.stopPropagation(),t.changeSelectStatus(e,a)}}},[t._v(" "+t._s(e.database)+" ")])})),0):t._e()])]):t._e()])}),f=[];const L=s("2ef0");var b={name:"meta-multiple-select",props:{sourceList:{type:Array,default:()=>({})},sourceSelectedList:{type:Array,default:()=>({})}},data(){return{showDropDownList:!1,dropDownList:[],selectedList:[],key:"",searchMatchList:[]}},methods:{selectMatch(){L.forEach(this.searchMatchList,t=>{t.selected||(this.selectedList.push(t),t.selected=!0)}),this.setData()},fuzzySearch(t,e){if(!t)return this.dropDownList;let s=[];return L.forEach(e,e=>{let a=e.database;a.indexOf(t)>=0&&s.push(e)}),s},debounceSearchDatabase:L.debounce(t=>{t.searchMatchList=t.fuzzySearch(t.key,t.dropDownList)},300),searchDatabase(){this.debounceSearchDatabase(this)},deleteSelectItem(t,e){this.selectedList.splice(e,1);for(let s=0;s<this.searchMatchList.length;s++)if(this.searchMatchList[s].database==t.database){this.searchMatchList[s].selected=!1;break}this.setData()},changeSelectStatus(t){if(this.$set(t,"selected",!t.selected),t.selected)this.selectedList.push(t);else for(let e=0;e<this.selectedList.length;e++)if(this.selectedList[e].database==t.database){this.selectedList.splice(e,1);break}this.setData()},setData(){let t=[];for(let e=0;e<this.sourceList.length;e++)for(let s=0;s<this.selectedList.length;s++)this.sourceList[e].database===this.selectedList[s].database&&t.push(this.sourceList[e]);this.$emit("returnData",t)},clickDropDown(){this.showDropDownList=!this.showDropDownList,setTimeout(()=>{document.addEventListener("click",this.removeEvt)},0)},removeEvt(){document.removeEventListener("click",()=>{}),this.showDropDownList=!1},initDropDownListStatus(){L.forEach(this.selectedList,t=>{for(let e=0;e<this.dropDownList.length;e++)if(t.database==this.dropDownList[e].database){this.dropDownList[e].selected=!0;break}})}},mounted(){console.log(111),this.dropDownList=L.cloneDeep(this.sourceList),this.selectedList=L.cloneDeep(this.sourceSelectedList),this.initDropDownListStatus(),this.searchMatchList=this.dropDownList},watch:{sourceList(t){console.log(111),this.dropDownList=L.cloneDeep(t),this.initDropDownListStatus(),this.searchMatchList=this.dropDownList,console.log("this.searchMatchList"),console.log(this.searchMatchList)},sourceSelectedList(t){this.selectedList=L.cloneDeep(t),this.initDropDownListStatus(),this.searchMatchList=this.dropDownList}}},v=b,w=(s("d8eb"),Object(r["a"])(v,p,f,!1,null,"5a5ae4fd",null)),D=w.exports;D.install=function(t){t.component(D.name,D)};var m=D;a["default"].use(d.a),a["default"].use(m),new a["default"]({render:t=>t(u)}).$mount("#app")},"7c55":function(t,e,s){"use strict";var a=s("b3a6"),i=s.n(a);i.a},b235:function(t,e,s){},b3a6:function(t,e,s){},d8eb:function(t,e,s){"use strict";var a=s("b235"),i=s.n(a);i.a},f6e1:function(t,e,s){}});